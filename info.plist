<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
<dict>
	<key>bundleid</key>
	<string>org.nadel.alfred.pinfred</string>
	<key>category</key>
	<string>Productivity</string>
	<key>connections</key>
	<dict>
		<key>29FE8E28-6834-4FEC-AC57-26BE2C097FA2</key>
		<array>
			<dict>
				<key>destinationuid</key>
				<string>55E00529-28FB-47AB-B063-270ECD91DF99</string>
				<key>modifiers</key>
				<integer>0</integer>
				<key>modifiersubtext</key>
				<string></string>
				<key>vitoclose</key>
				<false/>
			</dict>
		</array>
		<key>4FDEF949-4E8C-45CF-8D23-65FF23CCD8A5</key>
		<array>
			<dict>
				<key>destinationuid</key>
				<string>C39FDE93-7F8A-4DF0-B317-6019C21CFB44</string>
				<key>modifiers</key>
				<integer>0</integer>
				<key>modifiersubtext</key>
				<string></string>
				<key>vitoclose</key>
				<false/>
			</dict>
		</array>
		<key>55E00529-28FB-47AB-B063-270ECD91DF99</key>
		<array>
			<dict>
				<key>destinationuid</key>
				<string>58AE9976-96DE-49E4-AAF4-26EDE604672C</string>
				<key>modifiers</key>
				<integer>0</integer>
				<key>modifiersubtext</key>
				<string></string>
				<key>sourceoutputuid</key>
				<string>CEE166A2-DA5A-490E-B639-0C6A1ECC6BBA</string>
				<key>vitoclose</key>
				<false/>
			</dict>
			<dict>
				<key>destinationuid</key>
				<string>C39FDE93-7F8A-4DF0-B317-6019C21CFB44</string>
				<key>modifiers</key>
				<integer>0</integer>
				<key>modifiersubtext</key>
				<string></string>
				<key>vitoclose</key>
				<false/>
			</dict>
		</array>
		<key>5B530577-97D6-4560-BA49-B0C405AED2F8</key>
		<array>
			<dict>
				<key>destinationuid</key>
				<string>D5285D37-4758-4EE9-85B7-1C364E71D4D7</string>
				<key>modifiers</key>
				<integer>0</integer>
				<key>modifiersubtext</key>
				<string></string>
				<key>vitoclose</key>
				<false/>
			</dict>
		</array>
		<key>665937E4-4EF7-460A-A446-E2F97BA380C1</key>
		<array>
			<dict>
				<key>destinationuid</key>
				<string>5B530577-97D6-4560-BA49-B0C405AED2F8</string>
				<key>modifiers</key>
				<integer>0</integer>
				<key>modifiersubtext</key>
				<string></string>
				<key>vitoclose</key>
				<false/>
			</dict>
		</array>
		<key>8DC8E0E5-2070-4C1C-AEDE-8A043DEFF651</key>
		<array>
			<dict>
				<key>destinationuid</key>
				<string>5B530577-97D6-4560-BA49-B0C405AED2F8</string>
				<key>modifiers</key>
				<integer>0</integer>
				<key>modifiersubtext</key>
				<string></string>
				<key>sourceoutputuid</key>
				<string>3E475409-17E2-46DA-8F5A-6D9FF62A5963</string>
				<key>vitoclose</key>
				<false/>
			</dict>
			<dict>
				<key>destinationuid</key>
				<string>A8427EEE-9787-48DC-9482-E747453A1606</string>
				<key>modifiers</key>
				<integer>0</integer>
				<key>modifiersubtext</key>
				<string></string>
				<key>sourceoutputuid</key>
				<string>89F7A57B-863C-4E40-BDDC-8CF1F7B522D5</string>
				<key>vitoclose</key>
				<false/>
			</dict>
		</array>
		<key>A8427EEE-9787-48DC-9482-E747453A1606</key>
		<array>
			<dict>
				<key>destinationuid</key>
				<string>CA990FFB-1A84-4CBA-A42D-05731119C84B</string>
				<key>modifiers</key>
				<integer>0</integer>
				<key>modifiersubtext</key>
				<string></string>
				<key>vitoclose</key>
				<false/>
			</dict>
		</array>
		<key>AFAA6AB9-5CED-48DF-9CE4-6AD00F90D6F8</key>
		<array>
			<dict>
				<key>destinationuid</key>
				<string>8DC8E0E5-2070-4C1C-AEDE-8A043DEFF651</string>
				<key>modifiers</key>
				<integer>0</integer>
				<key>modifiersubtext</key>
				<string></string>
				<key>vitoclose</key>
				<false/>
			</dict>
		</array>
		<key>ED618719-6E1D-430F-8FE7-A59EB07736DA</key>
		<array>
			<dict>
				<key>destinationuid</key>
				<string>55E00529-28FB-47AB-B063-270ECD91DF99</string>
				<key>modifiers</key>
				<integer>0</integer>
				<key>modifiersubtext</key>
				<string></string>
				<key>vitoclose</key>
				<false/>
			</dict>
		</array>
	</dict>
	<key>createdby</key>
	<string>Michael Nadel</string>
	<key>description</key>
	<string>Search and open your Pinboard.in pins</string>
	<key>disabled</key>
	<false/>
	<key>name</key>
	<string>Pinfred</string>
	<key>objects</key>
	<array>
		<dict>
			<key>config</key>
			<dict>
				<key>alfredfiltersresults</key>
				<false/>
				<key>alfredfiltersresultsmatchmode</key>
				<integer>2</integer>
				<key>argumenttreatemptyqueryasnil</key>
				<true/>
				<key>argumenttrimmode</key>
				<integer>0</integer>
				<key>argumenttype</key>
				<integer>0</integer>
				<key>escaping</key>
				<integer>102</integer>
				<key>keyword</key>
				<string>{var:keyword_pins}t</string>
				<key>queuedelaycustom</key>
				<integer>3</integer>
				<key>queuedelayimmediatelyinitially</key>
				<true/>
				<key>queuedelaymode</key>
				<integer>0</integer>
				<key>queuemode</key>
				<integer>1</integer>
				<key>runningsubtext</key>
				<string></string>
				<key>script</key>
				<string>./fts "$1"</string>
				<key>scriptargtype</key>
				<integer>1</integer>
				<key>scriptfile</key>
				<string></string>
				<key>subtext</key>
				<string>Use SQLite3's FTS</string>
				<key>title</key>
				<string>Search your Pins...</string>
				<key>type</key>
				<integer>11</integer>
				<key>withspace</key>
				<true/>
			</dict>
			<key>type</key>
			<string>alfred.workflow.input.scriptfilter</string>
			<key>uid</key>
			<string>ED618719-6E1D-430F-8FE7-A59EB07736DA</string>
			<key>version</key>
			<integer>3</integer>
		</dict>
		<dict>
			<key>config</key>
			<dict>
				<key>externaltriggerid</key>
				<string>refresh-bookmarks</string>
				<key>passinputasargument</key>
				<true/>
				<key>passvariables</key>
				<true/>
				<key>workflowbundleid</key>
				<string>self</string>
			</dict>
			<key>type</key>
			<string>alfred.workflow.output.callexternaltrigger</string>
			<key>uid</key>
			<string>58AE9976-96DE-49E4-AAF4-26EDE604672C</string>
			<key>version</key>
			<integer>1</integer>
		</dict>
		<dict>
			<key>config</key>
			<dict>
				<key>conditions</key>
				<array>
					<dict>
						<key>inputstring</key>
						<string>{query}</string>
						<key>matchcasesensitive</key>
						<false/>
						<key>matchmode</key>
						<integer>0</integer>
						<key>matchstring</key>
						<string>pins://refresh</string>
						<key>outputlabel</key>
						<string>refresh</string>
						<key>uid</key>
						<string>CEE166A2-DA5A-490E-B639-0C6A1ECC6BBA</string>
					</dict>
				</array>
				<key>elselabel</key>
				<string>else</string>
				<key>hideelse</key>
				<false/>
			</dict>
			<key>type</key>
			<string>alfred.workflow.utility.conditional</string>
			<key>uid</key>
			<string>55E00529-28FB-47AB-B063-270ECD91DF99</string>
			<key>version</key>
			<integer>1</integer>
		</dict>
		<dict>
			<key>config</key>
			<dict>
				<key>alfredfiltersresults</key>
				<true/>
				<key>alfredfiltersresultsmatchmode</key>
				<integer>2</integer>
				<key>argumenttreatemptyqueryasnil</key>
				<true/>
				<key>argumenttrimmode</key>
				<integer>0</integer>
				<key>argumenttype</key>
				<integer>0</integer>
				<key>escaping</key>
				<integer>102</integer>
				<key>keyword</key>
				<string>{var:keyword_pins}</string>
				<key>queuedelaycustom</key>
				<integer>3</integer>
				<key>queuedelayimmediatelyinitially</key>
				<true/>
				<key>queuedelaymode</key>
				<integer>0</integer>
				<key>queuemode</key>
				<integer>1</integer>
				<key>runningsubtext</key>
				<string></string>
				<key>script</key>
				<string>if [ -f bookmarks.json ]; then
	cat bookmarks.json
	exit 0
fi

# trigger refresh by invoking this workflow via applescript
osascript fetch.applescript

# wait up to 2 seconds (8 * 0.25), as above call is async
#
sleeps=0
max_sleeps=8
sleep_time=0.25

while [ ! -f bookmarks.json ] &amp;&amp; [ ${sleeps} -lt ${max_sleeps} ]; then
	sleep ${sleep_time}
	((sleeps = sleeps + 1))
done

if [ -f bookmarks.json ]; then
	cat bookmarks.json
else
	# if still no dice, generate and use sentinel
	./fetch --generate &gt; fetch.json
	cat fetch.json
fi</string>
				<key>scriptargtype</key>
				<integer>1</integer>
				<key>scriptfile</key>
				<string></string>
				<key>subtext</key>
				<string></string>
				<key>title</key>
				<string>Search your Pins...</string>
				<key>type</key>
				<integer>11</integer>
				<key>withspace</key>
				<true/>
			</dict>
			<key>type</key>
			<string>alfred.workflow.input.scriptfilter</string>
			<key>uid</key>
			<string>29FE8E28-6834-4FEC-AC57-26BE2C097FA2</string>
			<key>version</key>
			<integer>3</integer>
		</dict>
		<dict>
			<key>config</key>
			<dict>
				<key>alfredfiltersresults</key>
				<true/>
				<key>alfredfiltersresultsmatchmode</key>
				<integer>2</integer>
				<key>argumenttreatemptyqueryasnil</key>
				<true/>
				<key>argumenttrimmode</key>
				<integer>0</integer>
				<key>argumenttype</key>
				<integer>0</integer>
				<key>escaping</key>
				<integer>102</integer>
				<key>keyword</key>
				<string>{var:keyword_pins}{var:filter_keyword}</string>
				<key>queuedelaycustom</key>
				<integer>3</integer>
				<key>queuedelayimmediatelyinitially</key>
				<true/>
				<key>queuedelaymode</key>
				<integer>0</integer>
				<key>queuemode</key>
				<integer>1</integer>
				<key>runningsubtext</key>
				<string></string>
				<key>script</key>
				<string>cat bookmarks.json | ./filter ${filter_term}</string>
				<key>scriptargtype</key>
				<integer>1</integer>
				<key>scriptfile</key>
				<string></string>
				<key>subtext</key>
				<string>Filtering on: {var:filter_term}</string>
				<key>title</key>
				<string>Search your Pins...</string>
				<key>type</key>
				<integer>11</integer>
				<key>withspace</key>
				<true/>
			</dict>
			<key>type</key>
			<string>alfred.workflow.input.scriptfilter</string>
			<key>uid</key>
			<string>4FDEF949-4E8C-45CF-8D23-65FF23CCD8A5</string>
			<key>version</key>
			<integer>3</integer>
		</dict>
		<dict>
			<key>config</key>
			<dict>
				<key>browser</key>
				<string></string>
				<key>skipqueryencode</key>
				<false/>
				<key>skipvarencode</key>
				<false/>
				<key>spaces</key>
				<string></string>
				<key>url</key>
				<string>{query}</string>
			</dict>
			<key>type</key>
			<string>alfred.workflow.action.openurl</string>
			<key>uid</key>
			<string>C39FDE93-7F8A-4DF0-B317-6019C21CFB44</string>
			<key>version</key>
			<integer>1</integer>
		</dict>
		<dict>
			<key>config</key>
			<dict>
				<key>concurrently</key>
				<false/>
				<key>escaping</key>
				<integer>102</integer>
				<key>script</key>
				<string>./fetch &gt; bookmarks.json
cat bookmarks.json | ./fts -i</string>
				<key>scriptargtype</key>
				<integer>1</integer>
				<key>scriptfile</key>
				<string></string>
				<key>type</key>
				<integer>11</integer>
			</dict>
			<key>type</key>
			<string>alfred.workflow.action.script</string>
			<key>uid</key>
			<string>D5285D37-4758-4EE9-85B7-1C364E71D4D7</string>
			<key>version</key>
			<integer>2</integer>
		</dict>
		<dict>
			<key>config</key>
			<dict>
				<key>argumenttrimmode</key>
				<integer>0</integer>
				<key>argumenttype</key>
				<integer>1</integer>
				<key>fixedorder</key>
				<false/>
				<key>items</key>
				<string>[{"title":"Refresh","arg":"refresh","subtitle":"Refresh your Pins"},{"title":"Debug","arg":"debug","subtitle":"Show debug info"}]</string>
				<key>keyword</key>
				<string>:pin</string>
				<key>matchmode</key>
				<integer>0</integer>
				<key>runningsubtext</key>
				<string></string>
				<key>subtext</key>
				<string></string>
				<key>title</key>
				<string>Pinboard Utilities</string>
				<key>withspace</key>
				<true/>
			</dict>
			<key>type</key>
			<string>alfred.workflow.input.listfilter</string>
			<key>uid</key>
			<string>AFAA6AB9-5CED-48DF-9CE4-6AD00F90D6F8</string>
			<key>version</key>
			<integer>1</integer>
		</dict>
		<dict>
			<key>config</key>
			<dict>
				<key>argument</key>
				<string>{query}</string>
				<key>passthroughargument</key>
				<false/>
				<key>variables</key>
				<dict>
					<key>DATE_FORMAT</key>
					<string>{var:date_format}</string>
					<key>PINBOARD_TOKEN</key>
					<string>{var:api_token}</string>
				</dict>
			</dict>
			<key>type</key>
			<string>alfred.workflow.utility.argument</string>
			<key>uid</key>
			<string>5B530577-97D6-4560-BA49-B0C405AED2F8</string>
			<key>version</key>
			<integer>1</integer>
		</dict>
		<dict>
			<key>config</key>
			<dict>
				<key>conditions</key>
				<array>
					<dict>
						<key>inputstring</key>
						<string></string>
						<key>matchcasesensitive</key>
						<false/>
						<key>matchmode</key>
						<integer>0</integer>
						<key>matchstring</key>
						<string>refresh</string>
						<key>outputlabel</key>
						<string>Refresh</string>
						<key>uid</key>
						<string>3E475409-17E2-46DA-8F5A-6D9FF62A5963</string>
					</dict>
					<dict>
						<key>inputstring</key>
						<string></string>
						<key>matchcasesensitive</key>
						<false/>
						<key>matchmode</key>
						<integer>0</integer>
						<key>matchstring</key>
						<string>debug</string>
						<key>outputlabel</key>
						<string>Debug</string>
						<key>uid</key>
						<string>89F7A57B-863C-4E40-BDDC-8CF1F7B522D5</string>
					</dict>
				</array>
				<key>elselabel</key>
				<string>else</string>
				<key>hideelse</key>
				<true/>
			</dict>
			<key>type</key>
			<string>alfred.workflow.utility.conditional</string>
			<key>uid</key>
			<string>8DC8E0E5-2070-4C1C-AEDE-8A043DEFF651</string>
			<key>version</key>
			<integer>1</integer>
		</dict>
		<dict>
			<key>config</key>
			<dict>
				<key>availableviaurlhandler</key>
				<false/>
				<key>triggerid</key>
				<string>refresh-bookmarks</string>
			</dict>
			<key>type</key>
			<string>alfred.workflow.trigger.external</string>
			<key>uid</key>
			<string>665937E4-4EF7-460A-A446-E2F97BA380C1</string>
			<key>version</key>
			<integer>1</integer>
		</dict>
		<dict>
			<key>config</key>
			<dict>
				<key>concurrently</key>
				<false/>
				<key>escaping</key>
				<integer>102</integer>
				<key>script</key>
				<string>cat bookmarks.json | jq '.items[] | select(.title == "Last Refresh")'</string>
				<key>scriptargtype</key>
				<integer>1</integer>
				<key>scriptfile</key>
				<string></string>
				<key>type</key>
				<integer>11</integer>
			</dict>
			<key>type</key>
			<string>alfred.workflow.action.script</string>
			<key>uid</key>
			<string>A8427EEE-9787-48DC-9482-E747453A1606</string>
			<key>version</key>
			<integer>2</integer>
		</dict>
		<dict>
			<key>config</key>
			<dict>
				<key>behaviour</key>
				<integer>0</integer>
				<key>fontmode</key>
				<integer>0</integer>
				<key>fontsizing</key>
				<integer>0</integer>
				<key>footertext</key>
				<string></string>
				<key>inputfile</key>
				<string></string>
				<key>inputtype</key>
				<integer>0</integer>
				<key>loadingtext</key>
				<string></string>
				<key>outputmode</key>
				<integer>0</integer>
				<key>scriptinput</key>
				<integer>0</integer>
				<key>spellchecking</key>
				<integer>0</integer>
				<key>stackview</key>
				<false/>
			</dict>
			<key>type</key>
			<string>alfred.workflow.userinterface.text</string>
			<key>uid</key>
			<string>CA990FFB-1A84-4CBA-A42D-05731119C84B</string>
			<key>version</key>
			<integer>1</integer>
		</dict>
	</array>
	<key>readme</key>
	<string># Changelog

## v1.4

Support for SQLite3 full-text search queries.

## v1.3.2

Allow config options to be passsed through to filter.

## v1.3

Parameterized v1.2 prefiltering into the workflow configuration builder.

## v1.2

Added filter help script to prefilter results.

## v1.1

We'll now try fetching your Pins automatically on first triggering.</string>
	<key>uidata</key>
	<dict>
		<key>29FE8E28-6834-4FEC-AC57-26BE2C097FA2</key>
		<dict>
			<key>xpos</key>
			<real>230</real>
			<key>ypos</key>
			<real>170</real>
		</dict>
		<key>4FDEF949-4E8C-45CF-8D23-65FF23CCD8A5</key>
		<dict>
			<key>xpos</key>
			<real>230</real>
			<key>ypos</key>
			<real>290</real>
		</dict>
		<key>55E00529-28FB-47AB-B063-270ECD91DF99</key>
		<dict>
			<key>xpos</key>
			<real>415</real>
			<key>ypos</key>
			<real>130</real>
		</dict>
		<key>58AE9976-96DE-49E4-AAF4-26EDE604672C</key>
		<dict>
			<key>xpos</key>
			<real>560</real>
			<key>ypos</key>
			<real>95</real>
		</dict>
		<key>5B530577-97D6-4560-BA49-B0C405AED2F8</key>
		<dict>
			<key>xpos</key>
			<real>750</real>
			<key>ypos</key>
			<real>445</real>
		</dict>
		<key>665937E4-4EF7-460A-A446-E2F97BA380C1</key>
		<dict>
			<key>xpos</key>
			<real>555</real>
			<key>ypos</key>
			<real>520</real>
		</dict>
		<key>8DC8E0E5-2070-4C1C-AEDE-8A043DEFF651</key>
		<dict>
			<key>xpos</key>
			<real>420</real>
			<key>ypos</key>
			<real>450</real>
		</dict>
		<key>A8427EEE-9787-48DC-9482-E747453A1606</key>
		<dict>
			<key>xpos</key>
			<real>550</real>
			<key>ypos</key>
			<real>655</real>
		</dict>
		<key>AFAA6AB9-5CED-48DF-9CE4-6AD00F90D6F8</key>
		<dict>
			<key>xpos</key>
			<real>230</real>
			<key>ypos</key>
			<real>430</real>
		</dict>
		<key>C39FDE93-7F8A-4DF0-B317-6019C21CFB44</key>
		<dict>
			<key>xpos</key>
			<real>560</real>
			<key>ypos</key>
			<real>290</real>
		</dict>
		<key>CA990FFB-1A84-4CBA-A42D-05731119C84B</key>
		<dict>
			<key>xpos</key>
			<real>765</real>
			<key>ypos</key>
			<real>655</real>
		</dict>
		<key>D5285D37-4758-4EE9-85B7-1C364E71D4D7</key>
		<dict>
			<key>xpos</key>
			<real>855</real>
			<key>ypos</key>
			<real>415</real>
		</dict>
		<key>ED618719-6E1D-430F-8FE7-A59EB07736DA</key>
		<dict>
			<key>xpos</key>
			<real>230</real>
			<key>ypos</key>
			<real>45</real>
		</dict>
	</dict>
	<key>userconfigurationconfig</key>
	<array>
		<dict>
			<key>config</key>
			<dict>
				<key>default</key>
				<string>user:api_key</string>
				<key>placeholder</key>
				<string></string>
				<key>required</key>
				<true/>
				<key>trim</key>
				<true/>
			</dict>
			<key>description</key>
			<string>Available at https://pinboard.in/settings/password</string>
			<key>label</key>
			<string>API Token</string>
			<key>type</key>
			<string>textfield</string>
			<key>variable</key>
			<string>api_token</string>
		</dict>
		<dict>
			<key>config</key>
			<dict>
				<key>default</key>
				<string>pins</string>
				<key>placeholder</key>
				<string></string>
				<key>required</key>
				<false/>
				<key>trim</key>
				<true/>
			</dict>
			<key>description</key>
			<string>Keyword to activate search</string>
			<key>label</key>
			<string>Pins Keyword</string>
			<key>type</key>
			<string>textfield</string>
			<key>variable</key>
			<string>keyword_pins</string>
		</dict>
		<dict>
			<key>config</key>
			<dict>
				<key>default</key>
				<string>pinfresh</string>
				<key>placeholder</key>
				<string></string>
				<key>required</key>
				<false/>
				<key>trim</key>
				<true/>
			</dict>
			<key>description</key>
			<string>Keyword to activate a refresh</string>
			<key>label</key>
			<string>Refresh Keyword</string>
			<key>type</key>
			<string>textfield</string>
			<key>variable</key>
			<string>keyword_refresh</string>
		</dict>
		<dict>
			<key>config</key>
			<dict>
				<key>default</key>
				<string>%a %b %m %Y %-I:%M %p</string>
				<key>placeholder</key>
				<string></string>
				<key>required</key>
				<false/>
				<key>trim</key>
				<true/>
			</dict>
			<key>description</key>
			<string>Format used for debug info (search bookmarks for @debug)</string>
			<key>label</key>
			<string>Debug info date format</string>
			<key>type</key>
			<string>textfield</string>
			<key>variable</key>
			<string>date_format</string>
		</dict>
		<dict>
			<key>config</key>
			<dict>
				<key>default</key>
				<string></string>
				<key>placeholder</key>
				<string></string>
				<key>required</key>
				<false/>
				<key>trim</key>
				<true/>
			</dict>
			<key>description</key>
			<string></string>
			<key>label</key>
			<string>Filter Keyword</string>
			<key>type</key>
			<string>textfield</string>
			<key>variable</key>
			<string>filter_keyword</string>
		</dict>
		<dict>
			<key>config</key>
			<dict>
				<key>default</key>
				<string></string>
				<key>placeholder</key>
				<string></string>
				<key>required</key>
				<false/>
				<key>trim</key>
				<true/>
			</dict>
			<key>description</key>
			<string></string>
			<key>label</key>
			<string>Filter Term</string>
			<key>type</key>
			<string>textfield</string>
			<key>variable</key>
			<string>filter_term</string>
		</dict>
	</array>
	<key>version</key>
	<string>1.4</string>
	<key>webaddress</key>
	<string>https://github.com/mnadel/pinfred</string>
</dict>
</plist>
